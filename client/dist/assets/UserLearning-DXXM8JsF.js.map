{"version":3,"file":"UserLearning-DXXM8JsF.js","sources":["../../src/components/Pagination/Pagination.jsx","../../src/pages/user/learning/UserLearning.jsx"],"sourcesContent":["import React from \"react\";\r\n\r\nconst Pagination = ({ currentPage, totalPages, onPageChange, isDarkMode }) => {\r\n  if (totalPages <= 1) return null;\r\n\r\n  const pages = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return (\r\n    <nav>\r\n      <ul\r\n        className={`pagination justify-content-center ${\r\n          isDarkMode ? \"pagination-dark\" : \"\"\r\n        }`}\r\n      >\r\n        {/* Previous Button */}\r\n        <li className={`page-item ${currentPage === 1 ? \"disabled\" : \"\"}`}>\r\n          <button\r\n            className={`page-link ${\r\n              isDarkMode ? \"bg-dark border-secondary text-light\" : \"\"\r\n            }`}\r\n            onClick={() => onPageChange(currentPage - 1)}\r\n            disabled={currentPage === 1}\r\n          >\r\n            <span aria-hidden=\"true\">&laquo;</span>\r\n          </button>\r\n        </li>\r\n\r\n        {/* Page Numbers */}\r\n        {pages.map((page) => (\r\n          <li\r\n            key={page}\r\n            className={`page-item ${currentPage === page ? \"active\" : \"\"}`}\r\n          >\r\n            <button\r\n              className={`page-link ${\r\n                isDarkMode\r\n                  ? currentPage === page\r\n                    ? \"bg-primary border-primary text-light\"\r\n                    : \"bg-dark border-secondary text-light\"\r\n                  : \"\"\r\n              }`}\r\n              onClick={() => onPageChange(page)}\r\n            >\r\n              {page}\r\n            </button>\r\n          </li>\r\n        ))}\r\n\r\n        {/* Next Button */}\r\n        <li\r\n          className={`page-item ${\r\n            currentPage === totalPages ? \"disabled\" : \"\"\r\n          }`}\r\n        >\r\n          <button\r\n            className={`page-link ${\r\n              isDarkMode ? \"bg-dark border-secondary text-light\" : \"\"\r\n            }`}\r\n            onClick={() => onPageChange(currentPage + 1)}\r\n            disabled={currentPage === totalPages}\r\n          >\r\n            <span aria-hidden=\"true\">&raquo;</span>\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport UserLayout from \"../layout/UserLayout\";\r\nimport Pagination from \"../../../components/Pagination/Pagination\";\r\nimport { useGetCourseByUserQuery } from \"../../../controller/api/course/ApiCourse\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst UserLearning = () => {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [sortBy, setSortBy] = useState(\"recent\");\r\n  const coursesPerPage = 6;\r\n\r\n  const { data: enrolledCourses, isLoading, error } = useGetCourseByUserQuery();\r\n\r\n  // Filter and sort courses\r\n  const filteredCourses = enrolledCourses\r\n    ? enrolledCourses\r\n        .filter((course) => {\r\n          const matchesSearch = course.title\r\n            .toLowerCase()\r\n            .includes(searchTerm.toLowerCase());\r\n          const matchesCategory =\r\n            !selectedCategory || course.category === selectedCategory;\r\n          return matchesSearch && matchesCategory;\r\n        })\r\n        .sort((a, b) => {\r\n          switch (sortBy) {\r\n            case \"recent\":\r\n              return new Date(b.enrollment_date) - new Date(a.enrollment_date);\r\n            case \"title\":\r\n              return a.title.localeCompare(b.title);\r\n            default:\r\n              return 0;\r\n          }\r\n        })\r\n    : [];\r\n\r\n  // Calculate pagination\r\n  const indexOfLastCourse = currentPage * coursesPerPage;\r\n  const indexOfFirstCourse = indexOfLastCourse - coursesPerPage;\r\n  const currentCourses = filteredCourses.slice(\r\n    indexOfFirstCourse,\r\n    indexOfLastCourse\r\n  );\r\n  const totalPages = Math.ceil(filteredCourses.length / coursesPerPage);\r\n\r\n  const handlePageChange = (pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  // Get unique categories for filter dropdown\r\n  const categories = enrolledCourses\r\n    ? [...new Set(enrolledCourses.map((course) => course.category))]\r\n    : [];\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <UserLayout title='My Learning'>\r\n        <div className='text-center py-5'>\r\n          <div className='spinner-border text-primary' role='status'>\r\n            <span className='visually-hidden'>Loading...</span>\r\n          </div>\r\n        </div>\r\n      </UserLayout>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return (\r\n      <UserLayout title='My Learning'>\r\n        <div className='alert alert-danger' role='alert'>\r\n          Error loading courses. Please try again later.\r\n        </div>\r\n      </UserLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <UserLayout title='My Learning'>\r\n      {/* Search and Filter Section */}\r\n      <div className='row mb-4'>\r\n        <div className='col-md-6'>\r\n          <div className='input-group'>\r\n            <span className='input-group-text border-end-0'>\r\n              <i className='bi bi-search'></i>\r\n            </span>\r\n            <input\r\n              type='text'\r\n              className='form-control border-start-0'\r\n              placeholder='Search your courses...'\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className='col-md-6 d-flex justify-content-md-end mt-3 mt-md-0 gap-2'>\r\n          <select\r\n            className='form-select w-auto'\r\n            value={selectedCategory}\r\n            onChange={(e) => setSelectedCategory(e.target.value)}\r\n          >\r\n            <option value=''>All Categories</option>\r\n            {categories.map((category) => (\r\n              <option key={category} value={category}>\r\n                {category}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            className='form-select w-auto'\r\n            value={sortBy}\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n          >\r\n            <option value='recent'>Recently Enrolled</option>\r\n            <option value='title'>Course Title</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Course Grid */}\r\n      <div className='row g-4'>\r\n        {currentCourses.length > 0 ? (\r\n          currentCourses.map((course) => (\r\n            <div key={course.id} className='col-md-6 col-lg-4'>\r\n              <div className='card h-100 border-0 shadow-sm'>\r\n                <img\r\n                  src={course.thumbnail}\r\n                  className='card-img-top'\r\n                  alt={course.title}\r\n                  style={{ height: \"200px\", objectFit: \"cover\" }}\r\n                />\r\n                <div className='card-body'>\r\n                  <div className='d-flex justify-content-between align-items-start mb-2'>\r\n                    <span className='badge bg-primary'>{course.category}</span>\r\n                    <small>\r\n                      Enrolled:{\" \"}\r\n                      {new Date(course.enrollment_date).toLocaleDateString()}\r\n                    </small>\r\n                  </div>\r\n                  <h5 className='card-title mb-1'>{course.title}</h5>\r\n                  <p className='small mb-2'>by {course.instructor}</p>\r\n\r\n                  <div className='progress mb-3' style={{ height: \"5px\" }}>\r\n                    <div\r\n                      className='progress-bar bg-primary'\r\n                      role='progressbar'\r\n                      style={{ width: `${course.progress}%` }}\r\n                      aria-valuenow={course.progress}\r\n                      aria-valuemin='0'\r\n                      aria-valuemax='100'\r\n                    ></div>\r\n                  </div>\r\n\r\n                  <div className='d-flex justify-content-between align-items-center'>\r\n                    <span className='small'>\r\n                      {course.completed_lessons} of {course.total_lessons}{\" \"}\r\n                      lessons\r\n                    </span>\r\n                    <span className='fw-bold'>{course.progress}%</span>\r\n                  </div>\r\n                </div>\r\n                <div className='card-footer bg-transparent border-0'>\r\n                  <div className='d-grid'>\r\n                    <Link\r\n                      to={`/learning/course/${course.id}/${course.title.replace(\r\n                        / /g,\r\n                        \"-\"\r\n                      )}`}\r\n                      className='btn btn-primary'\r\n                    >\r\n                      <i className='bi bi-play-circle me-2'></i>\r\n                      Continue Learning\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className='col-12 text-center py-5'>\r\n            <h4>No courses found</h4>\r\n            <p className='text-muted'>Try adjusting your search or filters</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className='mt-4'>\r\n          <Pagination\r\n            currentPage={currentPage}\r\n            totalPages={totalPages}\r\n            onPageChange={handlePageChange}\r\n          />\r\n        </div>\r\n      )}\r\n    </UserLayout>\r\n  );\r\n};\r\n\r\nexport default UserLearning;\r\n"],"names":["Pagination","currentPage","totalPages","onPageChange","isDarkMode","pages","i","push","children","jsxRuntimeExports","jsxs","className","jsx","onClick","disabled","map","page","UserLearning","setCurrentPage","useState","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","sortBy","setSortBy","data","enrolledCourses","isLoading","error","useGetCourseByUserQuery","filteredCourses","filter","course","matchesSearch","title","toLowerCase","includes","matchesCategory","category","sort","a","b","Date","enrollment_date","localeCompare","indexOfLastCourse","indexOfFirstCourse","currentCourses","slice","Math","ceil","length","categories","Set","UserLayout","role","console","log","type","placeholder","value","onChange","e","target","src","thumbnail","alt","style","height","objectFit","toLocaleDateString","instructor","width","progress","completed_lessons","total_lessons","Link","to","id","replace","pageNumber"],"mappings":"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"}