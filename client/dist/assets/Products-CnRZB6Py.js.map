{"version":3,"file":"Products-CnRZB6Py.js","sources":["../../src/pages/product/Products.jsx"],"sourcesContent":["import React, { Fragment, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar/Navbar\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useGetProductsQuery } from \"../../controller/api/admin/ApiProduct\";\r\n\r\nconst Products = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(16);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading, error } = useGetProductsQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n  });\r\n\r\n  const {\r\n    products = [],\r\n    total = 0,\r\n    page: totalPage,\r\n    limit: totalLimit,\r\n  } = data || {};\r\n\r\n  const renderStars = (rating) => {\r\n    const stars = [];\r\n    const fullStars = Math.floor(rating);\r\n    const hasHalfStar = rating % 1 !== 0;\r\n\r\n    for (let i = 0; i < fullStars; i++) {\r\n      stars.push(\r\n        <i key={`full-${i}`} className='bi bi-star-fill text-warning'></i>\r\n      );\r\n    }\r\n    if (hasHalfStar) {\r\n      stars.push(<i key='half' className='bi bi-star-half text-warning'></i>);\r\n    }\r\n    const emptyStars = 5 - Math.ceil(rating);\r\n    for (let i = 0; i < emptyStars; i++) {\r\n      stars.push(\r\n        <i key={`empty-${i}`} className='bi bi-star text-warning'></i>\r\n      );\r\n    }\r\n\r\n    return stars;\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    setPage(1); // Reset to first page when searching\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const start = 240;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Fragment>\r\n        <Navbar />\r\n        <main style={{ marginTop: 80 }} className='container py-3'>\r\n          <div className='text-center'>\r\n            <div className='spinner-border text-primary' role='status'>\r\n              <span className='visually-hidden'>Loading...</span>\r\n            </div>\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Navbar />\r\n        <main style={{ marginTop: 80 }} className='container py-3'>\r\n          <div className='alert alert-danger' role='alert'>\r\n            Error loading products. Please try again later.\r\n          </div>\r\n        </main>\r\n        <Footer />\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  console.log(products);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Navbar />\r\n      <title>Products</title>\r\n      <main style={{ marginTop: 80 }} className='container py-3'>\r\n        <h2 className='text-center mb-4'>Products</h2>\r\n\r\n        {/* Search Form */}\r\n        <form onSubmit={handleSearch} className='mb-4'>\r\n          <div className='input-group'>\r\n            <input\r\n              type='text'\r\n              className='form-control'\r\n              placeholder='Search products...'\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n            />\r\n            <button className='btn btn-primary' type='submit'>\r\n              Search\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Products Grid */}\r\n        <div className='row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4'>\r\n          {products?.map((product) => (\r\n            <div key={product.id} className='col'>\r\n              <div className='card h-100 shadow-sm hover-shadow'>\r\n                <img\r\n                  src={product.image}\r\n                  className='card-img-top'\r\n                  alt={product.name}\r\n                  style={{ height: \"200px\", objectFit: \"cover\" }}\r\n                />\r\n                <div className='card-body'>\r\n                  <h5 className='card-title'>{product.name}</h5>\r\n\r\n                  <p className='card-text fw-bold text-primary'>\r\n                    Rp {parseFloat(product.price).toLocaleString(\"id-ID\")}\r\n                  </p>\r\n\r\n                  <div className='d-flex align-items-center mb-2'>\r\n                    <div className='me-2'>{renderStars(product.rating)}</div>\r\n                    <small className='text-muted'>\r\n                      {product.rating\r\n                        ? Number(product.rating).toFixed(1)\r\n                        : \"0.0\"}\r\n                      {product.reviewCount ? ` (${product.reviewCount})` : \"\"}\r\n                    </small>\r\n                  </div>\r\n\r\n                  <div className='text-success mb-3'>\r\n                    <i className='bi bi-graph-up-arrow me-1'></i>\r\n                    {(Number(product?.totalsales) + start).toLocaleString(\r\n                      \"id-ID\"\r\n                    )}{\" \"}\r\n                    sold\r\n                  </div>\r\n\r\n                  <Link\r\n                    to={`/product/${product.id}`}\r\n                    className='btn btn-primary w-100'>\r\n                    View Details\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        {total > 0 && (\r\n          <nav className='mt-4'>\r\n            <ul className='pagination pagination-sm justify-content-center'>\r\n              <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\r\n                <button\r\n                  className='page-link'\r\n                  onClick={() => handlePageChange(page - 1)}\r\n                  disabled={page === 1}>\r\n                  <i className='bi bi-chevron-double-left'></i>\r\n                </button>\r\n              </li>\r\n              {[...Array(Math.ceil(total / limit))].map((_, index) => (\r\n                <li\r\n                  key={index + 1}\r\n                  className={`page-item ${page === index + 1 ? \"active\" : \"\"}`}>\r\n                  <button\r\n                    className='page-link'\r\n                    onClick={() => handlePageChange(index + 1)}>\r\n                    {index + 1}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n              <li\r\n                className={`page-item ${\r\n                  page === Math.ceil(total / limit) ? \"disabled\" : \"\"\r\n                }`}>\r\n                <button\r\n                  className='page-link'\r\n                  onClick={() => handlePageChange(page + 1)}\r\n                  disabled={page === Math.ceil(total / limit)}>\r\n                  <i className='bi bi-chevron-double-right'></i>\r\n                </button>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        )}\r\n      </main>\r\n      <Footer />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"names":["Products","page","setPage","useState","limit","setLimit","search","setSearch","data","isLoading","error","useGetProductsQuery","products","total","totalPage","totalLimit","renderStars","rating","stars","fullStars","Math","floor","hasHalfStar","i","push","className","jsx","emptyStars","ceil","handlePageChange","newPage","Fragment","children","jsxRuntimeExports","Navbar","style","marginTop","role","Footer","console","log","jsxs","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","map","product","src","image","alt","name","height","objectFit","parseFloat","price","toLocaleString","Number","toFixed","reviewCount","totalsales","Link","to","id","onClick","disabled","Array","_","index"],"mappings":"6GAMA,MAAMA,EAAW,KACf,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,IAC1BC,EAAOC,GAAYF,EAAAA,SAAS,KAC5BG,EAAQC,GAAaJ,EAAAA,SAAS,KAE/BK,KAAEA,EAAAC,UAAMA,EAAWC,MAAAA,GAAUC,EAAoB,CACrDV,OACAG,QACAE,YAGIM,SACJA,EAAW,GAACC,MACZA,EAAQ,EACRZ,KAAMa,EACNV,MAAOW,GACLP,GAAQ,CAAC,EAEPQ,EAAeC,IACnB,MAAMC,EAAQ,GACRC,EAAYC,KAAKC,MAAMJ,GACvBK,EAAcL,EAAS,GAAM,EAEnC,IAAA,IAASM,EAAI,EAAGA,EAAIJ,EAAWI,IACvBL,EAAAM,WACH,IAAoB,CAAAC,UAAU,gCAAvB,QAAQF,MAGhBD,GACIJ,EAAAM,OAAME,IAAA,IAAA,CAAaD,UAAU,gCAAjB,SAEpB,MAAME,EAAa,EAAIP,KAAKQ,KAAKX,GACjC,IAAA,IAASM,EAAI,EAAGA,EAAII,EAAYJ,IACxBL,EAAAM,WACH,IAAqB,CAAAC,UAAU,2BAAxB,SAASF,MAId,OAAAL,CAAA,EAQHW,EAAoBC,IACxB5B,EAAQ4B,EAAO,EAKjB,OAAIrB,SAECsB,WACC,CAAAC,SAAA,CAAAC,EAAAP,IAACQ,EAAO,MACRR,IAAC,OAAK,CAAAS,MAAO,CAAEC,UAAW,IAAMX,UAAU,iBACxCO,WAACN,IAAA,MAAA,CAAID,UAAU,cACbO,eAAC,MAAI,CAAAP,UAAU,8BAA8BY,KAAK,SAChDL,SAAAN,EAAAA,IAAC,OAAK,CAAAD,UAAU,kBAAkBO,SAAA,2BAIvCM,EAAO,CAAA,MAKV5B,SAECqB,WACC,CAAAC,SAAA,CAAAC,EAAAP,IAACQ,EAAO,UACP,OAAK,CAAAC,MAAO,CAAEC,UAAW,IAAMX,UAAU,iBACxCO,WAAAN,IAAC,OAAID,UAAU,qBAAqBY,KAAK,QAAQL,qEAIlDM,EAAO,CAAA,OAKdC,QAAQC,IAAI5B,UAGTmB,WACC,CAAAC,SAAA,CAAAC,EAAAP,IAACQ,EAAO,MACRR,IAAC,SAAMM,SAAQ,aACfS,OAAC,QAAKN,MAAO,CAAEC,UAAW,IAAMX,UAAU,iBACxCO,SAAA,CAACN,EAAAA,IAAA,KAAA,CAAGD,UAAU,mBAAmBO,SAAQ,aAGzCN,EAAAA,IAAC,QAAKgB,SAnDUC,IACpBA,EAAEC,iBACF1C,EAAQ,EAAC,EAiDyBuB,UAAU,OACtCO,WAAAS,KAAC,MAAI,CAAAhB,UAAU,cACbO,SAAA,CAAAC,EAAAP,IAAC,QAAA,CACCmB,KAAK,OACLpB,UAAU,eACVqB,YAAY,qBACZC,MAAOzC,EACP0C,SAAWL,GAAMpC,EAAUoC,EAAEM,OAAOF,eAErC,SAAO,CAAAtB,UAAU,kBAAkBoB,KAAK,SAASb,SAElD,gBAKHN,MAAA,MAAA,CAAID,UAAU,iDACZO,0BAAUkB,KAAKC,GACdzB,EAAAA,IAAC,OAAqBD,UAAU,MAC9BO,SAACS,EAAAA,KAAA,MAAA,CAAIhB,UAAU,oCACbO,SAAA,CAAAC,EAAAP,IAAC,MAAA,CACC0B,IAAKD,EAAQE,MACb5B,UAAU,eACV6B,IAAKH,EAAQI,KACbpB,MAAO,CAAEqB,OAAQ,QAASC,UAAW,aAEvChB,KAAC,MAAI,CAAAhB,UAAU,YACbO,SAAA,CAAAN,EAAAA,IAAC,KAAG,CAAAD,UAAU,aAAcO,SAAAmB,EAAQI,SAEpCd,KAAC,IAAE,CAAAhB,UAAU,iCAAiCO,SAAA,CAAA,MACxC0B,WAAWP,EAAQQ,OAAOC,eAAe,cAG/CnB,KAAC,MAAI,CAAAhB,UAAU,iCACbO,SAAA,CAAAN,MAAC,OAAID,UAAU,OAAQO,SAAYhB,EAAAmC,EAAQlC,YAC3CwB,KAAC,QAAM,CAAAhB,UAAU,aACdO,SAAA,CAAAmB,EAAQlC,OACL4C,OAAOV,EAAQlC,QAAQ6C,QAAQ,GAC/B,MACHX,EAAQY,YAAc,KAAKZ,EAAQY,eAAiB,WAIzDtB,KAAC,MAAI,CAAAhB,UAAU,oBACbO,SAAA,GAACN,IAAA,IAAA,CAAED,UAAU,+BACXoC,OAAO,MAAAV,OAAA,EAAAA,EAASa,YAvFtB,KAuF2CJ,eACrC,SACC,IAAI,UAIT3B,EAAAP,IAACuC,EAAA,CACCC,GAAI,YAAYf,EAAQgB,KACxB1C,UAAU,wBAAwBO,SAAA,wBAnChCmB,EAAQgB,QA6CrBtD,EAAQ,GACNa,EAAAA,IAAA,MAAA,CAAID,UAAU,OACbO,WAAAS,KAAC,KAAG,CAAAhB,UAAU,kDACZO,SAAA,CAAAN,EAAAA,IAAC,MAAGD,UAAW,cAAsB,IAATxB,EAAa,WAAa,IACpD+B,SAAAC,EAAAP,IAAC,SAAA,CACCD,UAAU,YACV2C,QAAS,IAAMvC,EAAiB5B,EAAO,GACvCoE,SAAmB,IAATpE,EACV+B,SAAAN,EAAAA,IAAC,IAAE,CAAAD,UAAU,kCAGhB,IAAI6C,MAAMlD,KAAKQ,KAAKf,EAAQT,KAAS8C,KAAI,CAACqB,EAAGC,IAC5CvC,EAAAP,IAAC,KAAA,CAECD,UAAW,cAAaxB,IAASuE,EAAQ,EAAI,SAAW,IACxDxC,SAAAC,EAAAP,IAAC,SAAA,CACCD,UAAU,YACV2C,QAAS,IAAMvC,EAAiB2C,EAAQ,GACvCxC,SAAQwC,EAAA,KALNA,EAAQ,KASjBvC,EAAAP,IAAC,KAAA,CACCD,UAAW,cACTxB,IAASmB,KAAKQ,KAAKf,EAAQT,GAAS,WAAa,IAEnD4B,SAAAC,EAAAP,IAAC,SAAA,CACCD,UAAU,YACV2C,QAAS,IAAMvC,EAAiB5B,EAAO,GACvCoE,SAAUpE,IAASmB,KAAKQ,KAAKf,EAAQT,GACrC4B,SAAAN,EAAAA,IAAC,IAAE,CAAAD,UAAU,iDAOxBa,EAAO,CAAA,MACV"}