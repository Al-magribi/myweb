{"version":3,"file":"AdminProducts-Jt4WYOSo.js","sources":["../../src/pages/admin/product/Form.jsx","../../src/pages/admin/product/Reviews.jsx","../../src/pages/admin/product/Products.jsx","../../src/pages/admin/product/AdminProducts.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { useAddProductMutation } from \"../../../controller/api/product/ApiProduct\";\r\nimport ReactQuill from \"react-quill-new\";\r\nimport \"react-quill-new/dist/quill.snow.css\";\r\n\r\nconst Form = ({ refetch, editData, isEdit, setIsEdit }) => {\r\n  const [features, setFeatures] = useState([\"\"]);\r\n  const [productType, setProductType] = useState(\"product\"); // \"product\" or \"ebook\"\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    status: \"active\",\r\n  });\r\n  const [description, setDescription] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n  const [ebook, setEbook] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n\r\n  const [addProduct, { isLoading, reset }] = useAddProductMutation();\r\n\r\n  // Set initial data when in edit mode\r\n  useEffect(() => {\r\n    if (isEdit && editData) {\r\n      setFormData({\r\n        name: editData.name || \"\",\r\n        price: editData.price || \"\",\r\n        description: editData.description || \"\",\r\n        status: editData.status || \"active\",\r\n      });\r\n      setProductType(editData.ebook ? \"ebook\" : \"product\");\r\n      setPreview(editData.image);\r\n      setDescription(editData.description);\r\n      // Set features if they exist\r\n      if (editData.features && editData.features.length > 0) {\r\n        setFeatures(editData.features);\r\n      }\r\n    }\r\n  }, [isEdit, editData]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setImage(file);\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleEbookChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setEbook(file);\r\n  };\r\n\r\n  const addFeature = () => {\r\n    setFeatures([...features, \"\"]);\r\n  };\r\n\r\n  const removeFeature = (index) => {\r\n    const newFeatures = features.filter((_, i) => i !== index);\r\n    setFeatures(newFeatures);\r\n  };\r\n\r\n  const handleFeatureChange = (index, value) => {\r\n    const newFeatures = [...features];\r\n    newFeatures[index] = value;\r\n    setFeatures(newFeatures);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      name: \"\",\r\n      price: \"\",\r\n      description: \"\",\r\n      status: \"active\",\r\n    });\r\n    setFeatures([\"\"]);\r\n    setImage(null);\r\n    setEbook(null);\r\n    setPreview(null);\r\n    setProductType(\"product\");\r\n    setIsEdit();\r\n\r\n    const closeModal = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n    closeModal.click();\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append(\"name\", formData.name);\r\n      formDataToSend.append(\"price\", formData.price);\r\n      formDataToSend.append(\"description\", description);\r\n      formDataToSend.append(\"status\", formData.status);\r\n      formDataToSend.append(\"type\", productType);\r\n\r\n      // Filter out empty features\r\n      const validFeatures = features.filter((feature) => feature.trim() !== \"\");\r\n      formDataToSend.append(\"features\", JSON.stringify(validFeatures));\r\n\r\n      if (image) {\r\n        formDataToSend.append(\"image\", image);\r\n      }\r\n\r\n      if (productType === \"ebook\" && ebook) {\r\n        formDataToSend.append(\"ebook\", ebook);\r\n      }\r\n\r\n      // Add product ID if in edit mode\r\n      if (isEdit && editData) {\r\n        formDataToSend.append(\"id\", editData.id);\r\n      }\r\n\r\n      await toast.promise(\r\n        addProduct(formDataToSend)\r\n          .unwrap()\r\n          .then((res) => res.message),\r\n        {\r\n          loading: isEdit ? \"Updating product...\" : \"Adding product...\",\r\n          success: (message) => message,\r\n          error: (error) => error.data.message,\r\n        }\r\n      );\r\n\r\n      // Reset form\r\n      setFormData({\r\n        name: \"\",\r\n        price: \"\",\r\n        description: \"\",\r\n        status: \"active\",\r\n      });\r\n      setFeatures([\"\"]);\r\n      setImage(null);\r\n      setEbook(null);\r\n      setPreview(null);\r\n      setProductType(\"product\");\r\n      setIsEdit();\r\n      reset();\r\n\r\n      // Close modal\r\n      const closeModal = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n      closeModal.click();\r\n\r\n      // Refetch data if callback provided\r\n      if (refetch) {\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error in form submission:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className='modal fade'\r\n      id='addproduct'\r\n      data-bs-backdrop='static'\r\n      data-bs-keyboard='false'\r\n      tabIndex='-1'\r\n      aria-labelledby='staticBackdropLabel'\r\n      aria-hidden='true'\r\n    >\r\n      <div className='modal-dialog modal-lg modal-dialog-scrollable'>\r\n        <div className='modal-content'>\r\n          <div className='modal-header'>\r\n            <h1 className='modal-title fs-5' id='staticBackdropLabel'>\r\n              {isEdit ? \"Edit Product\" : \"Add Product\"}\r\n            </h1>\r\n            <button\r\n              type='button'\r\n              className='btn-close'\r\n              data-bs-dismiss='modal'\r\n              aria-label='Close'\r\n              onClick={handleClose}\r\n            ></button>\r\n          </div>\r\n          <div className='modal-body'>\r\n            <form onSubmit={handleSubmit}>\r\n              {/* Product Type Selection */}\r\n              <div className='mb-4'>\r\n                <label className='form-label'>Product Type</label>\r\n                <div className='d-flex gap-3'>\r\n                  <div className='form-check'>\r\n                    <input\r\n                      className='form-check-input'\r\n                      type='radio'\r\n                      name='productType'\r\n                      id='typeProduct'\r\n                      checked={productType === \"product\"}\r\n                      onChange={() => setProductType(\"product\")}\r\n                    />\r\n                    <label className='form-check-label' htmlFor='typeProduct'>\r\n                      Physical Product\r\n                    </label>\r\n                  </div>\r\n                  <div className='form-check'>\r\n                    <input\r\n                      className='form-check-input'\r\n                      type='radio'\r\n                      name='productType'\r\n                      id='typeEbook'\r\n                      checked={productType === \"ebook\"}\r\n                      onChange={() => setProductType(\"ebook\")}\r\n                    />\r\n                    <label className='form-check-label' htmlFor='typeEbook'>\r\n                      E-Book\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Basic Information */}\r\n              <div className='row mb-4'>\r\n                <div className='col-md-6'>\r\n                  <div className='mb-3'>\r\n                    <label htmlFor='productName' className='form-label'>\r\n                      Product Name\r\n                    </label>\r\n                    <input\r\n                      type='text'\r\n                      className='form-control'\r\n                      id='productName'\r\n                      name='name'\r\n                      value={formData.name}\r\n                      onChange={handleInputChange}\r\n                      placeholder='Enter product name'\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className='col-md-6'>\r\n                  <div className='mb-3'>\r\n                    <label htmlFor='productPrice' className='form-label'>\r\n                      Price\r\n                    </label>\r\n                    <div className='input-group'>\r\n                      <span className='input-group-text'>IDR</span>\r\n                      <input\r\n                        type='number'\r\n                        className='form-control'\r\n                        id='productPrice'\r\n                        name='price'\r\n                        value={formData.price}\r\n                        onChange={handleInputChange}\r\n                        placeholder='0'\r\n                        min='0'\r\n                        step='1000'\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <small className='text-muted'>\r\n                      Enter price in IDR (Indonesian Rupiah)\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Image Upload */}\r\n              <div className='mb-4'>\r\n                <label className='form-label'>Product Image</label>\r\n                <div className='d-flex align-items-center gap-3'>\r\n                  <div\r\n                    className='border rounded p-3 text-center'\r\n                    style={{ width: \"150px\", height: \"150px\" }}\r\n                  >\r\n                    {preview ? (\r\n                      <img\r\n                        src={preview}\r\n                        alt='Preview'\r\n                        style={{\r\n                          width: \"100%\",\r\n                          height: \"100%\",\r\n                          objectFit: \"cover\",\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <>\r\n                        <i className='bi bi-image text-muted fs-1'></i>\r\n                        <p className='mb-0 text-muted small'>No image</p>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  <div className='flex-grow-1'>\r\n                    <input\r\n                      type='file'\r\n                      className='form-control'\r\n                      onChange={handleImageChange}\r\n                      accept='image/*'\r\n                      required={!isEdit}\r\n                    />\r\n                    <small className='text-muted'>\r\n                      Recommended size: 600x600 pixels\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* E-book File Upload */}\r\n              {productType === \"ebook\" && (\r\n                <div className='mb-4'>\r\n                  <label className='form-label'>E-Book File</label>\r\n                  {isEdit && editData?.ebook && (\r\n                    <div className='mb-2'>\r\n                      <a\r\n                        href={editData.ebook}\r\n                        target='_blank'\r\n                        rel='noopener noreferrer'\r\n                        className='btn btn-link p-0'\r\n                      >\r\n                        Lihat/Download E-Book Saat Ini\r\n                      </a>\r\n                    </div>\r\n                  )}\r\n                  <input\r\n                    type='file'\r\n                    className='form-control'\r\n                    onChange={handleEbookChange}\r\n                    accept='.pdf,.epub,.mobi'\r\n                    required={productType === \"ebook\" && !isEdit}\r\n                  />\r\n                  <small className='text-muted'>\r\n                    Accepted formats: PDF, EPUB, MOBI\r\n                  </small>\r\n                </div>\r\n              )}\r\n\r\n              {/* Description */}\r\n              <div className='mb-4'>\r\n                <label htmlFor='productDescription' className='form-label'>\r\n                  Description\r\n                </label>\r\n                <ReactQuill\r\n                  theme='snow'\r\n                  value={description}\r\n                  onChange={setDescription}\r\n                />\r\n                {/* <textarea\r\n                  className='form-control'\r\n                  id='productDescription'\r\n                  name='description'\r\n                  value={formData.description}\r\n                  onChange={handleInputChange}\r\n                  rows='4'\r\n                  placeholder='Enter product description'\r\n                  required></textarea> */}\r\n              </div>\r\n\r\n              {/* Features */}\r\n              <div className='mb-4'>\r\n                <div className='d-flex justify-content-between align-items-center mb-2'>\r\n                  <label className='form-label mb-0'>Key Features</label>\r\n                  <button\r\n                    type='button'\r\n                    className='btn btn-sm btn-outline-primary'\r\n                    onClick={addFeature}\r\n                  >\r\n                    <i className='bi bi-plus-lg me-1'></i>\r\n                    Add Feature\r\n                  </button>\r\n                </div>\r\n                {features.map((feature, index) => (\r\n                  <div key={index} className='input-group mb-2'>\r\n                    <input\r\n                      type='text'\r\n                      className='form-control'\r\n                      value={feature}\r\n                      onChange={(e) =>\r\n                        handleFeatureChange(index, e.target.value)\r\n                      }\r\n                      placeholder={`Feature ${index + 1}`}\r\n                    />\r\n                    <button\r\n                      type='button'\r\n                      className='btn btn-outline-danger'\r\n                      onClick={() => removeFeature(index)}\r\n                    >\r\n                      <i className='bi bi-trash'></i>\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Status */}\r\n              <div className='mb-4'>\r\n                <label className='form-label'>Status</label>\r\n                <div className='form-check'>\r\n                  <input\r\n                    className='form-check-input'\r\n                    type='radio'\r\n                    name='status'\r\n                    id='statusActive'\r\n                    value='active'\r\n                    checked={formData.status === \"active\"}\r\n                    onChange={handleInputChange}\r\n                  />\r\n                  <label className='form-check-label' htmlFor='statusActive'>\r\n                    Active\r\n                  </label>\r\n                </div>\r\n                <div className='form-check'>\r\n                  <input\r\n                    className='form-check-input'\r\n                    type='radio'\r\n                    name='status'\r\n                    id='statusInactive'\r\n                    value='inactive'\r\n                    checked={formData.status === \"inactive\"}\r\n                    onChange={handleInputChange}\r\n                  />\r\n                  <label className='form-check-label' htmlFor='statusInactive'>\r\n                    Inactive\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='modal-footer px-0 pb-0'>\r\n                <button\r\n                  type='button'\r\n                  className='btn btn-secondary'\r\n                  data-bs-dismiss='modal'\r\n                  onClick={handleClose}\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type='submit'\r\n                  className='btn btn-primary'\r\n                  disabled={isLoading}\r\n                >\r\n                  {isLoading ? (\r\n                    <>\r\n                      <span\r\n                        className='spinner-border spinner-border-sm me-2'\r\n                        role='status'\r\n                        aria-hidden='true'\r\n                      ></span>\r\n                      {isEdit ? \"Updating...\" : \"Saving...\"}\r\n                    </>\r\n                  ) : isEdit ? (\r\n                    \"Update Product\"\r\n                  ) : (\r\n                    \"Save Product\"\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useGetProductReviewsQuery } from \"../../../controller/api/product/ApiProduct\";\r\n\r\nconst Reviews = ({ id }) => {\r\n  const [page, setPage] = useState(1);\r\n  const limit = 10;\r\n\r\n  const { data, isLoading, refetch } = useGetProductReviewsQuery(\r\n    {\r\n      productId: id,\r\n      page,\r\n      limit,\r\n    },\r\n    { skip: !id }\r\n  );\r\n\r\n  const handleClose = () => {\r\n    const closeModal = document.querySelector(\"[data-bs-dismiss='modal']\");\r\n    if (closeModal) {\r\n      closeModal.click();\r\n    }\r\n  };\r\n\r\n  const renderStars = (rating) => {\r\n    const stars = [];\r\n    const fullStars = Math.floor(rating);\r\n    const hasHalfStar = rating % 1 !== 0;\r\n\r\n    for (let i = 0; i < fullStars; i++) {\r\n      stars.push(\r\n        <i key={`full-${i}`} className='bi bi-star-fill text-warning'></i>\r\n      );\r\n    }\r\n    if (hasHalfStar) {\r\n      stars.push(<i key='half' className='bi bi-star-half text-warning'></i>);\r\n    }\r\n    const emptyStars = 5 - Math.ceil(rating);\r\n    for (let i = 0; i < emptyStars; i++) {\r\n      stars.push(\r\n        <i key={`empty-${i}`} className='bi bi-star text-warning'></i>\r\n      );\r\n    }\r\n\r\n    return stars;\r\n  };\r\n\r\n  const totalPages = data ? Math.ceil(data.total / limit) : 0;\r\n\r\n  return (\r\n    <div\r\n      className='modal fade'\r\n      id='reviews'\r\n      data-bs-backdrop='static'\r\n      tabIndex='-1'\r\n    >\r\n      <div className='modal-dialog modal-dialog-centered modal-dialog-scrollable'>\r\n        <div className='modal-content'>\r\n          <div className='modal-header'>\r\n            <h1 className='modal-title fs-5'>Product's Reviews</h1>\r\n            <button\r\n              type='button'\r\n              className='btn-close'\r\n              onClick={handleClose}\r\n              aria-label='Close'\r\n              data-bs-dismiss='modal'\r\n            ></button>\r\n          </div>\r\n\r\n          <div className='modal-body'>\r\n            {isLoading ? (\r\n              <div className='text-center py-4'>\r\n                <div className='spinner-border text-primary' role='status'>\r\n                  <span className='visually-hidden'>Loading...</span>\r\n                </div>\r\n              </div>\r\n            ) : data && data.reviews.length > 0 ? (\r\n              <>\r\n                {data.reviews.map((review) => (\r\n                  <div key={review.id} className='card mb-3'>\r\n                    <div className='card-body'>\r\n                      <div className='d-flex justify-content-between align-items-center mb-2'>\r\n                        <div>\r\n                          <h6 className='mb-0'>{review.name}</h6>\r\n                        </div>\r\n                        <div className='text-warning'>\r\n                          {renderStars(review.rating)}\r\n                        </div>\r\n                      </div>\r\n                      {review.comment && (\r\n                        <p className='card-text mb-0'>{review.comment}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {/* Pagination Controls */}\r\n                <nav className='mt-3'>\r\n                  <ul className='pagination pagination-sm justify-content-center'>\r\n                    {/* First page button */}\r\n                    <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\r\n                      <button\r\n                        className='page-link'\r\n                        onClick={() => setPage(1)}\r\n                        disabled={page === 1}\r\n                      >\r\n                        <i className='bi bi-chevron-bar-left'></i>\r\n                      </button>\r\n                    </li>\r\n                    {/* Previous page button */}\r\n                    <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\r\n                      <button\r\n                        className='page-link'\r\n                        onClick={() => setPage(page - 1)}\r\n                        disabled={page === 1}\r\n                      >\r\n                        <i className='bi bi-chevron-double-left'></i>\r\n                      </button>\r\n                    </li>\r\n                    {/* Numbered page buttons (max 5) */}\r\n                    {(() => {\r\n                      let start = Math.max(1, page - 2);\r\n                      let end = Math.min(totalPages, page + 2);\r\n                      if (end - start < 4) {\r\n                        if (start === 1) {\r\n                          end = Math.min(totalPages, start + 4);\r\n                        } else if (end === totalPages) {\r\n                          start = Math.max(1, end - 4);\r\n                        }\r\n                      }\r\n                      const pages = [];\r\n                      for (let i = start; i <= end; i++) {\r\n                        pages.push(i);\r\n                      }\r\n                      return pages.map((pageNum) => (\r\n                        <li\r\n                          key={pageNum}\r\n                          className={`page-item ${\r\n                            page === pageNum ? \"active\" : \"\"\r\n                          }`}\r\n                        >\r\n                          <button\r\n                            className='page-link'\r\n                            onClick={() => setPage(pageNum)}\r\n                          >\r\n                            {pageNum}\r\n                          </button>\r\n                        </li>\r\n                      ));\r\n                    })()}\r\n                    {/* Next page button */}\r\n                    <li\r\n                      className={`page-item ${\r\n                        page === totalPages ? \"disabled\" : \"\"\r\n                      }`}\r\n                    >\r\n                      <button\r\n                        className='page-link'\r\n                        onClick={() => setPage(page + 1)}\r\n                        disabled={page === totalPages}\r\n                      >\r\n                        <i className='bi bi-chevron-double-right'></i>\r\n                      </button>\r\n                    </li>\r\n                    {/* Last page button */}\r\n                    <li\r\n                      className={`page-item ${\r\n                        page === totalPages ? \"disabled\" : \"\"\r\n                      }`}\r\n                    >\r\n                      <button\r\n                        className='page-link'\r\n                        onClick={() => setPage(totalPages)}\r\n                        disabled={page === totalPages}\r\n                      >\r\n                        <i className='bi bi-chevron-bar-right'></i>\r\n                      </button>\r\n                    </li>\r\n                  </ul>\r\n                </nav>\r\n              </>\r\n            ) : (\r\n              <div className='text-center py-4'>\r\n                <p className='text-muted mb-0'>No reviews yet</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className='modal-footer'>\r\n            <button\r\n              className='btn btn-sm btn-outline-secondary'\r\n              onClick={handleClose}\r\n              data-bs-dismiss='modal'\r\n            >\r\n              Tutup\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reviews;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDeleteProductMutation } from \"../../../controller/api/product/ApiProduct\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Reviews from \"./Reviews\";\r\n\r\nconst Products = ({ products, total, page, limit, setEditData, setIsEdit }) => {\r\n  const [id, setId] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const [deleteProduct, { isLoading, isSuccess, isError, reset }] =\r\n    useDeleteProductMutation();\r\n\r\n  const handleEdit = (product) => {\r\n    setEditData(product);\r\n    setIsEdit(true);\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    if (window.confirm(\"Are you sure you want to delete this product?\")) {\r\n      toast.promise(\r\n        deleteProduct(id)\r\n          .unwrap()\r\n          .then((res) => res.message),\r\n        {\r\n          loading: \"Deleting product...\",\r\n          success: (message) => message,\r\n          error: (error) => error.data.message,\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleDetail = (id) => {\r\n    navigate(`/product/${id}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess || isError) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError]);\r\n\r\n  console.log(products);\r\n  return (\r\n    <div className='card'>\r\n      <div className='card-body'>\r\n        <div className='table-responsive'>\r\n          <table className='table table-hover align-middle'>\r\n            <thead>\r\n              <tr>\r\n                <th>Image</th>\r\n                <th>Name</th>\r\n                <th>Price</th>\r\n                <th>Rating</th>\r\n                <th>Sales</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product.id}>\r\n                  <td style={{ width: \"80px\" }}>\r\n                    <img\r\n                      src={product.image}\r\n                      alt={product.name}\r\n                      className='rounded'\r\n                      style={{\r\n                        width: \"60px\",\r\n                        height: \"60px\",\r\n                        objectFit: \"cover\",\r\n                      }}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <div>\r\n                      <h6 className='mb-0'>{product.name}</h6>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    Rp {parseFloat(product.price).toLocaleString(\"id-ID\")}\r\n                  </td>\r\n                  <td>\r\n                    <div className='d-flex align-items-center'>\r\n                      <i className='bi bi-star-fill text-warning me-1'></i>\r\n                      {Number(product.rating || 0).toFixed(1)}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    {parseFloat(product.totalsales).toLocaleString(\"id-ID\")}\r\n                  </td>\r\n                  <td>\r\n                    <span\r\n                      className={`badge bg-${\r\n                        product.status === \"active\" ? \"success\" : \"secondary\"\r\n                      }`}\r\n                    >\r\n                      {product.status}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    <div className='d-flex gap-2'>\r\n                      <button\r\n                        data-bs-toggle='modal'\r\n                        data-bs-target='#addproduct'\r\n                        className='btn btn-sm btn-outline-warning'\r\n                        onClick={() => handleEdit(product)}\r\n                      >\r\n                        <i className='bi bi-pencil-square'></i>\r\n                      </button>\r\n\r\n                      <button\r\n                        className='btn btn-sm btn-outline-info'\r\n                        data-bs-toggle='modal'\r\n                        data-bs-target='#reviews'\r\n                        onClick={() => setId(product.id)}\r\n                      >\r\n                        <i className='bi bi-chat-dots'></i>\r\n                      </button>\r\n\r\n                      <button\r\n                        className='btn btn-sm btn-outline-danger'\r\n                        onClick={() => handleDelete(product.id)}\r\n                        disabled={isLoading}\r\n                      >\r\n                        <i className='bi bi-trash'></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        {total > 0 && (\r\n          <div className='d-flex justify-content-between align-items-center mt-4'>\r\n            <div>\r\n              Showing {products.length} of {total} products\r\n            </div>\r\n            <nav>\r\n              <ul className='pagination pagination-sm mb-0'>\r\n                <li className={`page-item ${page === 1 ? \"disabled\" : \"\"}`}>\r\n                  <button\r\n                    className='page-link'\r\n                    onClick={() => setPage(page - 1)}\r\n                    disabled={page === 1}\r\n                  >\r\n                    Previous\r\n                  </button>\r\n                </li>\r\n                <li className='page-item'>\r\n                  <span className='page-link'>{page}</span>\r\n                </li>\r\n                <li\r\n                  className={`page-item ${\r\n                    page * limit >= total ? \"disabled\" : \"\"\r\n                  }`}\r\n                >\r\n                  <button\r\n                    className='page-link'\r\n                    onClick={() => setPage(page + 1)}\r\n                    disabled={page * limit >= total}\r\n                  >\r\n                    Next\r\n                  </button>\r\n                </li>\r\n              </ul>\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <Reviews id={id} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport { useGetProductsQuery } from \"../../../controller/api/product/ApiProduct\";\r\nimport Products from \"./Products\";\r\nconst AdminProducts = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [editData, setEditData] = useState(null);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n\r\n  const { data, isLoading, refetch } = useGetProductsQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n  });\r\n\r\n  const handleCloseModal = () => {\r\n    setEditData(null);\r\n    setIsEdit(false);\r\n  };\r\n\r\n  // Handle loading state\r\n  if (isLoading) {\r\n    return (\r\n      <Layout title='Admin Products'>\r\n        <div className='container-fluid'>\r\n          <div\r\n            className='d-flex justify-content-center align-items-center'\r\n            style={{ height: \"80vh\" }}\r\n          >\r\n            <div className='spinner-border text-primary' role='status'>\r\n              <span className='visually-hidden'>Loading...</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  const { products = [], total = 0 } = data || {};\r\n\r\n  // Calculate stats\r\n  const totalProducts = total;\r\n  const totalSales = products.reduce(\r\n    (acc, curr) => acc + (curr.totalsales || 0),\r\n    0\r\n  );\r\n  const averageRating =\r\n    products.length > 0\r\n      ? (\r\n          products.reduce((acc, curr) => acc + (curr.rating || 0), 0) /\r\n          products.length\r\n        ).toFixed(1)\r\n      : 0;\r\n  const totalReviews = products.reduce(\r\n    (acc, curr) => acc + (curr.reviewcount || 0),\r\n    0\r\n  );\r\n\r\n  return (\r\n    <Layout title='Admin Products'>\r\n      <div className='container-fluid'>\r\n        {/* Search and Add Product */}\r\n        <div className='row mb-4'>\r\n          <div className='col-md-6'>\r\n            <div className='input-group'>\r\n              <input\r\n                type='text'\r\n                className='form-control'\r\n                placeholder='Search products...'\r\n                value={search}\r\n                onChange={(e) => setSearch(e.target.value)}\r\n              />\r\n              <button className='btn btn-outline-secondary' type='button'>\r\n                <i className='bi bi-search'></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className='col-md-6 text-end'>\r\n            <button\r\n              type='button'\r\n              data-bs-toggle='modal'\r\n              data-bs-target='#addproduct'\r\n              className='btn btn-primary'\r\n            >\r\n              <i className='bi bi-plus-lg me-2'></i>\r\n              Add Product\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className='row g-4 mb-4'>\r\n          <div className='col-12 col-sm-6 col-xl-3'>\r\n            <div className='card h-100'>\r\n              <div className='card-body'>\r\n                <div className='d-flex align-items-center'>\r\n                  <div className='flex-shrink-0 me-3'>\r\n                    <div className='p-3 rounded bg-primary bg-opacity-10'>\r\n                      <i className='bi bi-box text-primary fs-4'></i>\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1'>\r\n                    <h6 className='text-muted mb-1'>Total Products</h6>\r\n                    <h4 className='mb-0'>{totalProducts.toLocaleString()}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='col-12 col-sm-6 col-xl-3'>\r\n            <div className='card h-100'>\r\n              <div className='card-body'>\r\n                <div className='d-flex align-items-center'>\r\n                  <div className='flex-shrink-0 me-3'>\r\n                    <div className='p-3 rounded bg-success bg-opacity-10'>\r\n                      <i className='bi bi-graph-up text-success fs-4'></i>\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1'>\r\n                    <h6 className='text-muted mb-1'>Total Sales</h6>\r\n                    <h4 className='mb-0'>\r\n                      {parseFloat(totalSales).toLocaleString(\"id-ID\")}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='col-12 col-sm-6 col-xl-3'>\r\n            <div className='card h-100'>\r\n              <div className='card-body'>\r\n                <div className='d-flex align-items-center'>\r\n                  <div className='flex-shrink-0 me-3'>\r\n                    <div className='p-3 rounded bg-warning bg-opacity-10'>\r\n                      <i className='bi bi-star text-warning fs-4'></i>\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1'>\r\n                    <h6 className='text-muted mb-1'>Average Rating</h6>\r\n                    <h4 className='mb-0'>{averageRating}</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className='col-12 col-sm-6 col-xl-3'>\r\n            <div className='card h-100'>\r\n              <div className='card-body'>\r\n                <div className='d-flex align-items-center'>\r\n                  <div className='flex-shrink-0 me-3'>\r\n                    <div className='p-3 rounded bg-info bg-opacity-10'>\r\n                      <i className='bi bi-chat-dots text-info fs-4'></i>\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1'>\r\n                    <h6 className='text-muted mb-1'>Total Reviews</h6>\r\n                    <h4 className='mb-0'>\r\n                      {parseFloat(totalReviews).toLocaleString(\"id-ID\")}\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Products Table */}\r\n        <Products\r\n          products={products}\r\n          total={total}\r\n          page={page}\r\n          limit={limit}\r\n          setEditData={setEditData}\r\n          setIsEdit={setIsEdit}\r\n        />\r\n      </div>\r\n      <Form\r\n        refetch={refetch}\r\n        editData={editData}\r\n        setEditData={() => setEditData(null)}\r\n        isEdit={isEdit}\r\n        setIsEdit={() => setIsEdit(false)}\r\n        onClose={handleCloseModal}\r\n      />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminProducts;\r\n"],"names":["Form","refetch","editData","isEdit","setIsEdit","features","setFeatures","useState","productType","setProductType","formData","setFormData","name","price","description","status","setDescription","image","setImage","ebook","setEbook","preview","setPreview","addProduct","isLoading","reset","useAddProductMutation","useEffect","length","handleInputChange","e","value","target","handleClose","document","querySelector","click","jsxRuntimeExports","jsx","className","id","tabIndex","children","jsxs","type","onClick","onSubmit","async","preventDefault","formDataToSend","FormData","append","validFeatures","filter","feature","trim","JSON","stringify","toast","promise","unwrap","then","res","message","loading","success","error","data","console","checked","onChange","htmlFor","placeholder","required","min","step","style","width","height","src","alt","objectFit","Fragment","file","files","reader","FileReader","onloadend","result","readAsDataURL","accept","href","rel","ReactQuill","theme","map","index","newFeatures","handleFeatureChange","_","i","removeFeature","disabled","role","Reviews","page","setPage","useGetProductReviewsQuery","productId","limit","skip","closeModal","renderStars","rating","stars","fullStars","Math","floor","hasHalfStar","push","emptyStars","ceil","totalPages","total","reviews","review","comment","start","max","end","pages","pageNum","Products","products","setEditData","setId","useNavigate","deleteProduct","isSuccess","isError","useDeleteProductMutation","log","product","parseFloat","toLocaleString","Number","toFixed","totalsales","handleEdit","handleDelete","window","confirm","c","AdminProducts","setLimit","search","setSearch","useGetProductsQuery","Layout","title","totalProducts","totalSales","reduce","acc","curr","averageRating","totalReviews","reviewcount","onClose"],"mappings":"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"}