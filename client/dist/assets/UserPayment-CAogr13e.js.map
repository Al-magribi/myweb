{"version":3,"file":"UserPayment-CAogr13e.js","sources":["../../src/pages/user/payment/UserPayment.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserLayout from \"../layout/UserLayout\";\r\nimport { useGetUserOrderQuery } from \"../../../controller/api/order/ApiOrder\";\r\n\r\nconst UserPayment = () => {\r\n  const { data, isLoading } = useGetUserOrderQuery();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <UserLayout title='User Payment'>\r\n        <div className='d-flex justify-content-center'>\r\n          <div className='spinner-border text-primary' role='status'>\r\n            <span className='visually-hidden'>Loading...</span>\r\n          </div>\r\n        </div>\r\n      </UserLayout>\r\n    );\r\n  }\r\n\r\n  const { orders = [], enrollments = [] } = data || {};\r\n\r\n  // Calculate total spent from both orders and enrollments\r\n  const totalSpent =\r\n    orders.reduce((sum, order) => sum + parseFloat(order.total_amount), 0) +\r\n    enrollments.reduce(\r\n      (sum, enrollment) => sum + parseFloat(enrollment.price),\r\n      0\r\n    );\r\n\r\n  // Calculate completed transactions from both orders and enrollments\r\n  const completedTransactions =\r\n    orders.filter((order) => order.status === \"settlement\").length +\r\n    enrollments.filter((enrollment) => enrollment.status === \"settlement\")\r\n      .length;\r\n\r\n  // Calculate pending transactions from both orders and enrollments\r\n  const pendingTransactions =\r\n    orders.filter((order) => order.status !== \"settlement\").length +\r\n    enrollments.filter((enrollment) => enrollment.status !== \"settlement\")\r\n      .length;\r\n\r\n  return (\r\n    <UserLayout title='User Payment'>\r\n      {/* Summary Cards */}\r\n      <div className='row g-4 mb-4'>\r\n        <div className='col-md-4'>\r\n          <div className='card h-100 border-0 shadow-sm'>\r\n            <div className='card-body'>\r\n              <div className='d-flex align-items-center'>\r\n                <div className='flex-shrink-0'>\r\n                  <i className='bi bi-wallet2 fs-1 text-primary'></i>\r\n                </div>\r\n                <div className='flex-grow-1 ms-3'>\r\n                  <h6 className='mb-1'>Total Spent</h6>\r\n                  <h3 className='mb-0'>\r\n                    Rp {totalSpent.toLocaleString(\"id-ID\")}\r\n                  </h3>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='col-md-4'>\r\n          <div className='card h-100 border-0 shadow-sm'>\r\n            <div className='card-body'>\r\n              <div className='d-flex align-items-center'>\r\n                <div className='flex-shrink-0'>\r\n                  <i className='bi bi-check-circle fs-1 text-success'></i>\r\n                </div>\r\n                <div className='flex-grow-1 ms-3'>\r\n                  <h6 className='mb-1'>Completed Transactions</h6>\r\n                  <h3 className='mb-0'>{completedTransactions}</h3>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='col-md-4'>\r\n          <div className='card h-100 border-0 shadow-sm'>\r\n            <div className='card-body'>\r\n              <div className='d-flex align-items-center'>\r\n                <div className='flex-shrink-0'>\r\n                  <i className='bi bi-hourglass-split fs-1 text-warning'></i>\r\n                </div>\r\n                <div className='flex-grow-1 ms-3'>\r\n                  <h6 className='mb-1'>Pending Transactions</h6>\r\n                  <h3 className='mb-0'>{pendingTransactions}</h3>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Orders Section */}\r\n      <div className='row mb-4'>\r\n        <div className='col-12'>\r\n          <div className='card border-0 shadow-sm'>\r\n            <div className='card-header border-0 bg-transparent'>\r\n              <div className='d-flex justify-content-between align-items-center'>\r\n                <h5 className='card-title mb-0'>Order History</h5>\r\n                <button className='btn btn-primary btn-sm'>\r\n                  <i className='bi bi-download me-2'></i>\r\n                  Export\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className='card-body'>\r\n              <div className='row g-4'>\r\n                {orders.map((order) => (\r\n                  <div key={order.id} className='col-md-6 col-lg-4'>\r\n                    <div className='card h-100 border-0 shadow-sm hover-shadow'>\r\n                      <div className='position-relative'>\r\n                        {order.item_image && (\r\n                          <img\r\n                            src={order.item_image}\r\n                            alt={order.item_name}\r\n                            className='card-img-top'\r\n                            style={{ height: \"200px\", objectFit: \"cover\" }}\r\n                          />\r\n                        )}\r\n                        <span\r\n                          className={`badge position-absolute top-0 end-0 m-2 ${\r\n                            order.status === \"settlement\"\r\n                              ? \"bg-success\"\r\n                              : \"bg-warning\"\r\n                          }`}\r\n                        >\r\n                          {order.status}\r\n                        </span>\r\n                      </div>\r\n                      <div className='card-body'>\r\n                        <div className='d-flex justify-content-between align-items-start mb-2'>\r\n                          <h6 className='card-title mb-0'>{order.item_name}</h6>\r\n                          <span className='badge bg-info'>\r\n                            {order.type === \"course\" ? \"Course\" : \"Product\"}\r\n                          </span>\r\n                        </div>\r\n                        <p className='card-text text-muted mb-2'>\r\n                          <small>Order Code: {order.order_code}</small>\r\n                        </p>\r\n                        <div className='d-flex justify-content-between align-items-center'>\r\n                          <h5 className='mb-0 text-primary'>\r\n                            Rp{\" \"}\r\n                            {parseFloat(order.total_amount).toLocaleString(\r\n                              \"id-ID\"\r\n                            )}\r\n                          </h5>\r\n                          <button className='btn btn-sm btn-outline-primary'>\r\n                            <i className='bi bi-eye me-1'></i>\r\n                            View Details\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <div className='card-footer bg-transparent border-0'>\r\n                        <small className='text-muted'>\r\n                          Ordered on{\" \"}\r\n                          {new Date(order.created_at).toLocaleDateString(\r\n                            \"id-ID\"\r\n                          )}\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Enrollments Section */}\r\n      <div className='row'>\r\n        <div className='col-12'>\r\n          <div className='card border-0 shadow-sm'>\r\n            <div className='card-header border-0 bg-transparent'>\r\n              <h5 className='card-title mb-0'>Course Enrollments</h5>\r\n            </div>\r\n            <div className='card-body'>\r\n              <div className='row g-4'>\r\n                {enrollments.map((enrollment) => (\r\n                  <div key={enrollment.id} className='col-md-6 col-lg-4'>\r\n                    <div className='card h-100 border-0 shadow-sm hover-shadow'>\r\n                      <div className='position-relative'>\r\n                        {enrollment.course_image && (\r\n                          <img\r\n                            src={enrollment.course_image}\r\n                            alt={enrollment.course_name}\r\n                            className='card-img-top'\r\n                            style={{ height: \"200px\", objectFit: \"cover\" }}\r\n                          />\r\n                        )}\r\n                        <span\r\n                          className={`badge position-absolute top-0 end-0 m-2 ${\r\n                            enrollment.status === \"settlement\"\r\n                              ? \"bg-success\"\r\n                              : \"bg-warning\"\r\n                          }`}\r\n                        >\r\n                          {enrollment.status}\r\n                        </span>\r\n                      </div>\r\n                      <div className='card-body'>\r\n                        <h6 className='card-title mb-2'>\r\n                          {enrollment.course_name}\r\n                        </h6>\r\n\r\n                        <div className='d-flex justify-content-between align-items-center'>\r\n                          <h5 className='mb-0 text-primary'>\r\n                            Rp{\" \"}\r\n                            {parseFloat(enrollment.price).toLocaleString(\r\n                              \"id-ID\"\r\n                            )}\r\n                          </h5>\r\n                          <small className='text-muted'>\r\n                            Enrolled on{\" \"}\r\n                            {new Date(enrollment.created_at).toLocaleDateString(\r\n                              \"id-ID\"\r\n                            )}\r\n                          </small>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        .hover-shadow {\r\n          transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;\r\n        }\r\n        .hover-shadow:hover {\r\n          transform: translateY(-5px);\r\n          box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;\r\n        }\r\n      `}</style>\r\n    </UserLayout>\r\n  );\r\n};\r\n\r\nexport default UserPayment;\r\n"],"names":["UserPayment","data","isLoading","useGetUserOrderQuery","jsx","UserLayout","title","children","className","role","orders","enrollments","totalSpent","reduce","sum","order","parseFloat","total_amount","enrollment","price","completedTransactions","filter","status","length","pendingTransactions","jsxs","toLocaleString","map","item_image","jsxRuntimeExports","src","alt","item_name","style","height","objectFit","type","order_code","Date","created_at","toLocaleDateString","id","course_image","course_name"],"mappings":"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"}