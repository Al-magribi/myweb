import{C as e,j as a,D as s,E as i,G as l,H as n,I as t,N as r,A as d}from"./index-BoGK812d.js";import{b as c,e as m,R as o}from"./vendor-DgcVSihM.js";const h=({product:i})=>{const[l,n]=c.useState({name:"",email:"",phone:""}),[t,{isLoading:r,data:d,isSuccess:m,error:o,isError:h,reset:u}]=e(),x=()=>{n({name:"",email:"",phone:""})};return c.useEffect((()=>{if(m){window.fbq&&window.fbq("track","Purchase",{value:i.price,currency:"IDR",content_name:i.name,content_ids:[i.id],content_type:"product",num_items:1}),n({name:"",email:"",phone:""}),u();document.querySelector("[data-bs-dismiss='modal']").click(),window.location.href=d.redirect_url}h&&(u(),console.log(o))}),[m,h,o]),a.jsx("div",{className:"modal fade",id:"order","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"Proses Pemesanan"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:x})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"d-flex flex-column gap-3",children:[a.jsxs("div",{className:"form-floating",children:[a.jsx("input",{type:"text",className:"form-control",placeholder:"Nama Lengkap",value:l.name,onChange:e=>n({...l,name:e.target.value})}),a.jsx("label",{htmlFor:"name",children:"Nama"})]}),a.jsxs("div",{className:"form-floating",children:[a.jsx("input",{type:"email",className:"form-control",placeholder:"Email",value:l.email,onChange:e=>n({...l,email:e.target.value})}),a.jsx("label",{htmlFor:"email",children:"Email"})]}),a.jsxs("div",{className:"form-floating",children:[a.jsx("input",{type:"text",className:"form-control",placeholder:"Nomor Whatsapp",value:l.phone,onChange:e=>n({...l,phone:e.target.value})}),a.jsx("label",{htmlFor:"phone",children:"Nomor Whatsapp"})]})]})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-outline-danger","data-bs-dismiss":"modal",onClick:x,children:"Batal"}),a.jsx("button",{type:"button",className:"btn btn-primary",disabled:r,onClick:()=>{var e;const a={name:l.name,email:l.email,phone:l.phone,productid:i.id,quantity:1,url:window.location.href};s.promise(t(a).unwrap(),{loading:"Memproses Pemesanan...",success:"Pemesanan Berhasil",error:(null==(e=null==o?void 0:o.data)?void 0:e.message)||"Pemesanan Gagal"})},children:"Proses Pemesanan"})]})]})})})},u=()=>{const{id:e}=m(),[l,n]=c.useState({productId:e,name:"",email:"",rating:0,reviewComment:""}),[t,r]=c.useState({}),[d,{isLoading:o,isSuccess:h,isError:u,reset:x}]=i(),b=e=>{const{name:a,value:s}=e.target;n({...l,[a]:s}),t[a]&&r({...t,[a]:""})};return c.useEffect((()=>{h&&(n({productId:e,name:"",email:"",rating:0,reviewComment:""}),r({}),x()),u&&x()}),[h,u]),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title mb-3",children:"Write a Review"}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};return l.name.trim()||(e.name="Name is required"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(e.email="Email is invalid"):e.email="Email is required",l.rating||(e.rating="Please select a rating"),l.reviewComment.trim()||(e.reviewComment="Review comment is required"),r(e),0===Object.keys(e).length})()&&s.promise(d(l).unwrap().then((e=>e.message)),{loading:"Submitting review...",success:e=>e,error:e=>e.data.message})},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("div",{className:"rating-select",children:[1,2,3,4,5].map((e=>a.jsx("i",{className:`bi ${e<=l.rating?"bi-star-fill":"bi-star"} fs-4 me-2 text-warning`,style:{cursor:"pointer"},onClick:()=>{return a=e,n({...l,rating:a}),void(t.rating&&r({...t,rating:""}));var a}},e)))}),t.rating&&a.jsx("div",{className:"text-danger mt-1",children:t.rating})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"text",className:"form-control "+(t.name?"is-invalid":""),id:"name",placeholder:"Enter your name",name:"name",value:l.name,onChange:b}),a.jsx("label",{htmlFor:"name",children:"Your Name"}),t.name&&a.jsx("div",{className:"invalid-feedback",children:t.name})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"email",className:"form-control "+(t.email?"is-invalid":""),id:"email",placeholder:"Enter your email",name:"email",value:l.email,onChange:b}),a.jsx("label",{htmlFor:"email",children:"Your Email"}),t.email&&a.jsx("div",{className:"invalid-feedback",children:t.email})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("textarea",{className:"form-control "+(t.reviewComment?"is-invalid":""),id:"reviewComment",rows:"3",name:"reviewComment",placeholder:"Write your review here...",value:l.reviewComment,onChange:b}),a.jsx("label",{htmlFor:"reviewComment",children:"Your Review"}),t.reviewComment&&a.jsx("div",{className:"invalid-feedback",children:t.reviewComment})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Review"})]})]})})},x=({isReviewLoading:e,reviewData:s,reviewPage:i,setReviewPage:l,reviewLimit:n})=>{const t=e=>{const s=[],i=Math.floor(e),l=e%1!=0;for(let t=0;t<i;t++)s.push(a.jsx("i",{className:"bi bi-star-fill text-warning"},`full-${t}`));l&&s.push(a.jsx("i",{className:"bi bi-star-half text-warning"},"half"));const n=5-Math.ceil(e);for(let t=0;t<n;t++)s.push(a.jsx("i",{className:"bi bi-star text-warning"},`empty-${t}`));return s};return a.jsx("div",{children:e?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):s&&s.reviews.length>0?a.jsxs(a.Fragment,{children:[s.reviews.map((e=>a.jsx("div",{className:"card mb-3",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsx("div",{children:a.jsx("h6",{className:"mb-0",children:e.name})}),a.jsx("div",{className:"text-warning",children:t(e.rating)})]}),e.comment&&a.jsx("p",{className:"card-text mb-0",children:e.comment})]})},e.id))),a.jsx("nav",{className:"mt-3",children:a.jsxs("ul",{className:"pagination pagination-sm justify-content-center",children:[a.jsx("li",{className:"page-item "+(1===i?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(1),disabled:1===i,children:a.jsx("i",{className:"bi bi-chevron-bar-left"})})}),a.jsx("li",{className:"page-item "+(1===i?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(i-1),disabled:1===i,children:a.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const e=Math.ceil((s.total||0)/n);let t=Math.max(1,i-2),r=Math.min(e,i+2);r-t<4&&(1===t?r=Math.min(e,t+4):r===e&&(t=Math.max(1,r-4)));const d=[];for(let a=t;a<=r;a++)d.push(a);return d.map((e=>a.jsx("li",{className:"page-item "+(i===e?"active":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(e),children:e})},e)))})(),a.jsx("li",{className:"page-item "+(i===Math.ceil((s.total||0)/n)?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(i+1),disabled:i===Math.ceil((s.total||0)/n),children:a.jsx("i",{className:"bi bi-chevron-double-right"})})}),a.jsx("li",{className:"page-item "+(i===Math.ceil((s.total||0)/n)?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(Math.ceil((s.total||0)/n)),disabled:i===Math.ceil((s.total||0)/n),children:a.jsx("i",{className:"bi bi-chevron-bar-right"})})})]})})]}):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-muted mb-0",children:"No reviews yet"})})})},b=()=>{const{id:e}=m(),[i,n]=c.useState(""),[t,r]=c.useState(""),[d,o]=c.useState(!1),[h,{isLoading:u,isError:x,isSuccess:b,error:v,data:j,reset:g}]=l();return c.useEffect((()=>{b&&(g(),r(j.message),o(!0)),x&&(g(),r(v.data.message),o(!1))}),[b,x,j,v]),a.jsx("div",{className:"modal fade",id:"checkPayment","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content shadow-lg",children:[a.jsxs("div",{className:"modal-header border-bottom-0 pb-0",children:[a.jsx("h1",{className:"modal-title fs-4 fw-bold text-primary",id:"staticBackdropLabel",children:"Check Payment Status"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body pt-4",children:a.jsxs("form",{onSubmit:a=>{a.preventDefault();const l={email:i,productid:e};s.promise(h(l).unwrap().then((e=>e.message)),{loading:"Checking...",success:"Payment checked",error:"Payment not found"})},children:[a.jsxs("div",{className:"form-floating mb-4",children:[a.jsx("input",{type:"email",className:"form-control form-control-lg",id:"email",placeholder:"Enter Email",required:!0,value:i,onChange:e=>n(e.target.value)}),a.jsx("label",{htmlFor:"email",className:"text-muted",children:"Email Address"})]}),t&&a.jsxs("div",{className:`alert ${d?"alert-success":"alert-danger"} mb-4`,role:"alert",children:[a.jsx("i",{className:`bi ${d?"bi-check-circle":"bi-exclamation-circle"} me-2`}),t]}),a.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-100 py-3",disabled:u,children:u?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Checking..."]}):"Check Payment"})]})})]})})})},v=()=>{var e;const{id:s}=m(),{data:i,isLoading:l,error:c}=n(s),[v,j]=o.useState(1),{data:g,isLoading:N,error:p}=t({productId:s,page:v,limit:10}),w=e=>{const s=[],i=Math.floor(e),l=e%1!=0;for(let t=0;t<i;t++)s.push(a.jsx("i",{className:"bi bi-star-fill text-warning"},`full-${t}`));l&&s.push(a.jsx("i",{className:"bi bi-star-half text-warning"},"half"));const n=5-Math.ceil(e);for(let t=0;t<n;t++)s.push(a.jsx("i",{className:"bi bi-star text-warning"},`empty-${t}`));return s},f=(e,s,i)=>{const l=i>0?s/i*100:0;return a.jsxs("div",{className:"d-flex align-items-center mb-2",children:[a.jsxs("div",{className:"me-2",style:{width:"60px"},children:[e," stars"]}),a.jsx("div",{className:"progress flex-grow-1",style:{height:"8px"},children:a.jsx("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:`${l}%`},"aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsx("div",{className:"ms-2",style:{width:"40px"},children:s})]})};return a.jsxs("div",{className:"bg-light",children:[a.jsx("title",{children:null==i?void 0:i.name}),a.jsx("meta",{name:"description",content:null==i?void 0:i.description}),a.jsx(r,{}),a.jsx("main",{className:"container py-4",style:{marginTop:80},children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-12 d-md-none mb-4",children:a.jsx("img",{src:null==i?void 0:i.image,alt:null==i?void 0:i.name,className:"img-fluid rounded border border-2",style:{width:"100%",height:"auto"}})}),a.jsxs("div",{className:"col-md-6 mb-4 order-md-1 order-3",children:[a.jsx("div",{className:"d-none d-md-block",children:a.jsx("img",{src:null==i?void 0:i.image,alt:null==i?void 0:i.name,className:"img-fluid rounded border border-2 mb-4",style:{width:"100%",height:"auto"}})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"mb-3",children:"Customer Reviews"}),a.jsx("div",{className:"card mb-4",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-4 text-center",children:[a.jsx("h2",{className:"display-4 mb-0",children:Number(null==i?void 0:i.rating).toFixed(1)}),a.jsx("div",{className:"mb-2",children:w(null==i?void 0:i.rating)}),a.jsxs("p",{className:"text-muted mb-0",children:[null==i?void 0:i.reviewcount," reviews"]})]}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"rating-breakdown",children:[f(5,null==i?void 0:i.ratingBreakdown[5],(null==i?void 0:i.reviewCount)||(null==i?void 0:i.reviewcount)||0),f(4,null==i?void 0:i.ratingBreakdown[4],(null==i?void 0:i.reviewCount)||(null==i?void 0:i.reviewcount)||0),f(3,null==i?void 0:i.ratingBreakdown[3],(null==i?void 0:i.reviewCount)||(null==i?void 0:i.reviewcount)||0),f(2,null==i?void 0:i.ratingBreakdown[2],(null==i?void 0:i.reviewCount)||(null==i?void 0:i.reviewcount)||0),f(1,null==i?void 0:i.ratingBreakdown[1],(null==i?void 0:i.reviewCount)||(null==i?void 0:i.reviewcount)||0)]})})]})})}),a.jsx(x,{isReviewLoading:N,reviewData:g,reviewPage:v,setReviewPage:j,reviewLimit:10})]})]}),a.jsxs("div",{className:"col-md-6 bg-white p-4 rounded-3 border border-2 order-md-2 order-2",children:[a.jsx("h1",{className:"mb-3",children:null==i?void 0:i.name}),a.jsxs("h2",{className:"text-primary mb-4",children:["Rp ",parseFloat(null==i?void 0:i.price).toLocaleString("id-ID")]}),a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsx("div",{className:"me-2",children:w(null==i?void 0:i.rating)}),a.jsx("span",{className:"me-2",children:Number(null==i?void 0:i.rating).toFixed(1)}),a.jsxs("span",{className:"text-muted",children:["(",null==i?void 0:i.reviewcount," reviews)"]})]}),a.jsxs("div",{className:"text-success mb-4",children:[a.jsx("i",{className:"bi bi-graph-up-arrow me-1"}),Number((null==i?void 0:i.totalsales)+240).toLocaleString("id-ID")," sold"]}),a.jsx("div",{className:"text-muted mb-4",dangerouslySetInnerHTML:(y=null==i?void 0:i.description,{__html:y})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{children:"Key Features"}),a.jsx("ul",{className:"list-unstyled",children:null==(e=null==i?void 0:i.features)?void 0:e.map(((e,s)=>a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),e]},s)))})]}),a.jsxs("div",{className:"d-grid gap-2 mb-4",children:[a.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#order",className:"btn btn-success btn-lg",children:"Buy Now"}),a.jsx("button",{className:"btn btn-outline-warning btn-lg","data-bs-toggle":"modal","data-bs-target":"#checkPayment",children:"Check Payment"})]}),a.jsx(u,{})]})]})}),a.jsx(h,{product:i}),a.jsx(b,{}),a.jsx(d,{})]});var y};export{v as default};
//# sourceMappingURL=Detail-CLAYvQOu.js.map
