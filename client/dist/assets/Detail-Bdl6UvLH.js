import{C as e,j as a,D as i,E as s,G as l,H as r,S as t,N as n,I as d,A as c}from"./index-BROTEj3W.js";import{c as m,b as o,R as u}from"./vendor-BrtqdQb1.js";const h=()=>{const{id:s}=m(),[l,r]=o.useState({productId:s,name:"",email:"",rating:0,reviewComment:""}),[t,n]=o.useState({}),[d,{isLoading:c,isSuccess:u,isError:h,reset:v}]=e(),x=e=>{const{name:a,value:i}=e.target;r({...l,[a]:i}),t[a]&&n({...t,[a]:""})};return o.useEffect((()=>{u&&(r({productId:s,name:"",email:"",rating:0,reviewComment:""}),n({}),v()),h&&v()}),[u,h]),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title mb-3",children:"Write a Review"}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};return l.name.trim()||(e.name="Name is required"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(e.email="Email is invalid"):e.email="Email is required",l.rating||(e.rating="Please select a rating"),l.reviewComment.trim()||(e.reviewComment="Review comment is required"),n(e),0===Object.keys(e).length})()&&i.promise(d(l).unwrap().then((e=>e.message)),{loading:"Submitting review...",success:e=>e,error:e=>e.data.message})},children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("div",{className:"rating-select",children:[1,2,3,4,5].map((e=>a.jsx("i",{className:`bi ${e<=l.rating?"bi-star-fill":"bi-star"} fs-4 me-2 text-warning`,style:{cursor:"pointer"},onClick:()=>{return a=e,r({...l,rating:a}),void(t.rating&&n({...t,rating:""}));var a}},e)))}),t.rating&&a.jsx("div",{className:"text-danger mt-1",children:t.rating})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"text",className:"form-control "+(t.name?"is-invalid":""),id:"name",placeholder:"Enter your name",name:"name",value:l.name,onChange:x}),a.jsx("label",{htmlFor:"name",children:"Your Name"}),t.name&&a.jsx("div",{className:"invalid-feedback",children:t.name})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("input",{type:"email",className:"form-control "+(t.email?"is-invalid":""),id:"email",placeholder:"Enter your email",name:"email",value:l.email,onChange:x}),a.jsx("label",{htmlFor:"email",children:"Your Email"}),t.email&&a.jsx("div",{className:"invalid-feedback",children:t.email})]}),a.jsxs("div",{className:"form-floating mb-3",children:[a.jsx("textarea",{className:"form-control "+(t.reviewComment?"is-invalid":""),id:"reviewComment",rows:"3",name:"reviewComment",placeholder:"Write your review here...",value:l.reviewComment,onChange:x}),a.jsx("label",{htmlFor:"reviewComment",children:"Your Review"}),t.reviewComment&&a.jsx("div",{className:"invalid-feedback",children:t.reviewComment})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Review"})]})]})})},v=({isReviewLoading:e,reviewData:i,reviewPage:s,setReviewPage:l,reviewLimit:r})=>{const t=e=>{const i=[],s=Math.floor(e),l=e%1!=0;for(let t=0;t<s;t++)i.push(a.jsx("i",{className:"bi bi-star-fill text-warning"},`full-${t}`));l&&i.push(a.jsx("i",{className:"bi bi-star-half text-warning"},"half"));const r=5-Math.ceil(e);for(let t=0;t<r;t++)i.push(a.jsx("i",{className:"bi bi-star text-warning"},`empty-${t}`));return i};return a.jsx("div",{children:e?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):i&&i.reviews.length>0?a.jsxs(a.Fragment,{children:[i.reviews.map((e=>a.jsx("div",{className:"card mb-3",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[a.jsx("div",{children:a.jsx("h6",{className:"mb-0",children:e.name})}),a.jsx("div",{className:"text-warning",children:t(e.rating)})]}),e.comment&&a.jsx("p",{className:"card-text mb-0",children:e.comment})]})},e.id))),a.jsx("nav",{className:"mt-3",children:a.jsxs("ul",{className:"pagination pagination-sm justify-content-center",children:[a.jsx("li",{className:"page-item "+(1===s?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(1),disabled:1===s,children:a.jsx("i",{className:"bi bi-chevron-bar-left"})})}),a.jsx("li",{className:"page-item "+(1===s?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(s-1),disabled:1===s,children:a.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const e=Math.ceil((i.total||0)/r);let t=Math.max(1,s-2),n=Math.min(e,s+2);n-t<4&&(1===t?n=Math.min(e,t+4):n===e&&(t=Math.max(1,n-4)));const d=[];for(let a=t;a<=n;a++)d.push(a);return d.map((e=>a.jsx("li",{className:"page-item "+(s===e?"active":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(e),children:e})},e)))})(),a.jsx("li",{className:"page-item "+(s===Math.ceil((i.total||0)/r)?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(s+1),disabled:s===Math.ceil((i.total||0)/r),children:a.jsx("i",{className:"bi bi-chevron-double-right"})})}),a.jsx("li",{className:"page-item "+(s===Math.ceil((i.total||0)/r)?"disabled":""),children:a.jsx("button",{className:"page-link",onClick:()=>l(Math.ceil((i.total||0)/r)),disabled:s===Math.ceil((i.total||0)/r),children:a.jsx("i",{className:"bi bi-chevron-bar-right"})})})]})})]}):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-muted mb-0",children:"No reviews yet"})})})},x=()=>{const{id:e}=m(),[l,r]=o.useState(""),[t,n]=o.useState(""),[d,c]=o.useState(!1),[u,{isLoading:h,isError:v,isSuccess:x,error:b,data:g,reset:j}]=s();return o.useEffect((()=>{x&&(j(),n(g.message),c(!0)),v&&(j(),n(b.data.message),c(!1))}),[x,v,g,b]),a.jsx("div",{className:"modal fade",id:"checkPayment","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content shadow-lg",children:[a.jsxs("div",{className:"modal-header border-bottom-0 pb-0",children:[a.jsx("h1",{className:"modal-title fs-4 fw-bold text-primary",id:"staticBackdropLabel",children:"Check Payment Status"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body pt-4",children:a.jsxs("form",{onSubmit:a=>{a.preventDefault();const s={email:l,productid:e};i.promise(u(s).unwrap().then((e=>e.message)),{loading:"Checking...",success:"Payment checked",error:"Payment not found"})},children:[a.jsxs("div",{className:"form-floating mb-4",children:[a.jsx("input",{type:"email",className:"form-control form-control-lg",id:"email",placeholder:"Enter Email",required:!0,value:l,onChange:e=>r(e.target.value)}),a.jsx("label",{htmlFor:"email",className:"text-muted",children:"Email Address"})]}),t&&a.jsxs("div",{className:`alert ${d?"alert-success":"alert-danger"} mb-4`,role:"alert",children:[a.jsx("i",{className:`bi ${d?"bi-check-circle":"bi-exclamation-circle"} me-2`}),t]}),a.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-100 py-3",disabled:h,children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Checking..."]}):"Check Payment"})]})})]})})})},b=()=>{var e,i,s,o,b,g;const{id:j}=m(),{data:p,isLoading:N,error:w}=l(j),[f,y]=u.useState(1),{data:k,isLoading:C,error:S}=r({productId:j,page:f,limit:10}),R=p?{title:p.name,description:null==(e=p.description)?void 0:e.replace(/<[^>]*>/g,"").slice(0,160),keywords:`${p.name}, web development, online course, ${null==(i=p.features)?void 0:i.join(", ")}`,ogTitle:p.name,ogDescription:null==(s=p.description)?void 0:s.replace(/<[^>]*>/g,"").slice(0,160),ogImage:p.image,structuredData:{"@context":"https://schema.org","@type":"Product",name:p.name,description:null==(o=p.description)?void 0:o.replace(/<[^>]*>/g,""),image:p.image,offers:{"@type":"Offer",price:p.price,priceCurrency:"IDR",availability:"https://schema.org/InStock",url:window.location.href},aggregateRating:{"@type":"AggregateRating",ratingValue:p.rating||"0",reviewCount:p.reviewcount||"0"},review:null==(b=null==k?void 0:k.reviews)?void 0:b.map((e=>({"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:e.rating},author:{"@type":"Person",name:e.name},reviewBody:e.comment})))}}:{title:"Loading Product - ALMADEV",description:"Loading product details..."},L=e=>{const i=[],s=Math.floor(e),l=e%1!=0;for(let t=0;t<s;t++)i.push(a.jsx("i",{className:"bi bi-star-fill text-warning"},`full-${t}`));l&&i.push(a.jsx("i",{className:"bi bi-star-half text-warning"},"half"));const r=5-Math.ceil(e);for(let t=0;t<r;t++)i.push(a.jsx("i",{className:"bi bi-star text-warning"},`empty-${t}`));return i},M=(e,i,s)=>{const l=s>0?i/s*100:0;return a.jsxs("div",{className:"d-flex align-items-center mb-2",children:[a.jsxs("div",{className:"me-2",style:{width:"60px"},children:[e," stars"]}),a.jsx("div",{className:"progress flex-grow-1",style:{height:"8px"},children:a.jsx("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:`${l}%`},"aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"})}),a.jsx("div",{className:"ms-2",style:{width:"40px"},children:i})]})};return a.jsxs("div",{className:"bg-light",children:[a.jsx(t,{...R}),a.jsx(n,{}),a.jsx("main",{className:"container py-4",style:{marginTop:80},children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-12 d-md-none mb-4",children:a.jsx("img",{src:null==p?void 0:p.image,alt:null==p?void 0:p.name,className:"img-fluid rounded border border-2",style:{width:"100%",height:"auto"}})}),a.jsxs("div",{className:"col-md-6 mb-4 order-md-1 order-3",children:[a.jsx("div",{className:"d-none d-md-block",children:a.jsx("img",{src:null==p?void 0:p.image,alt:null==p?void 0:p.name,className:"img-fluid rounded border border-2 mb-4",style:{width:"100%",height:"auto"}})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"mb-3",children:"Customer Reviews"}),a.jsx("div",{className:"card mb-4",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-4 text-center",children:[a.jsx("h2",{className:"display-4 mb-0",children:Number(null==p?void 0:p.rating).toFixed(1)}),a.jsx("div",{className:"mb-2",children:L(null==p?void 0:p.rating)}),a.jsxs("p",{className:"text-muted mb-0",children:[null==p?void 0:p.reviewcount," ulasan"]})]}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"rating-breakdown",children:[M(5,null==p?void 0:p.ratingBreakdown[5],(null==p?void 0:p.reviewCount)||(null==p?void 0:p.reviewcount)||0),M(4,null==p?void 0:p.ratingBreakdown[4],(null==p?void 0:p.reviewCount)||(null==p?void 0:p.reviewcount)||0),M(3,null==p?void 0:p.ratingBreakdown[3],(null==p?void 0:p.reviewCount)||(null==p?void 0:p.reviewcount)||0),M(2,null==p?void 0:p.ratingBreakdown[2],(null==p?void 0:p.reviewCount)||(null==p?void 0:p.reviewcount)||0),M(1,null==p?void 0:p.ratingBreakdown[1],(null==p?void 0:p.reviewCount)||(null==p?void 0:p.reviewcount)||0)]})})]})})}),a.jsx(v,{isReviewLoading:C,reviewData:k,reviewPage:f,setReviewPage:y,reviewLimit:10})]})]}),a.jsxs("div",{className:"col-md-6 bg-white p-4 rounded-3 border border-2 order-md-2 order-2",children:[a.jsx("h1",{className:"mb-3",children:null==p?void 0:p.name}),a.jsxs("h2",{className:"text-primary mb-4",children:["Rp ",parseFloat(null==p?void 0:p.price).toLocaleString("id-ID")]}),a.jsxs("div",{className:"d-flex align-items-center mb-3",children:[a.jsx("div",{className:"me-2",children:L(null==p?void 0:p.rating)}),a.jsx("span",{className:"me-2",children:Number(null==p?void 0:p.rating).toFixed(1)}),a.jsxs("span",{className:"text-muted",children:["(",null==p?void 0:p.reviewcount," ulasan)"]})]}),a.jsxs("div",{className:"text-success mb-4",children:[a.jsx("i",{className:"bi bi-graph-up-arrow me-1"}),(Number(null==p?void 0:p.totalsales)+240).toLocaleString("id-ID")," ","terjual"]}),a.jsx("div",{className:"text-muted mb-4",dangerouslySetInnerHTML:(P=null==p?void 0:p.description,{__html:P})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{children:"Fitur Produk"}),a.jsx("ul",{className:"list-unstyled",children:null==(g=null==p?void 0:p.features)?void 0:g.map(((e,i)=>a.jsxs("li",{className:"mb-2",children:[a.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),e]},i)))})]}),a.jsxs("div",{className:"d-grid gap-2 mb-4",children:[a.jsx("button",{"data-bs-toggle":"modal","data-bs-target":"#order",className:"btn btn-success btn-lg",children:"Beli Sekarang"}),a.jsx("button",{className:"btn btn-outline-warning btn-lg","data-bs-toggle":"modal","data-bs-target":"#checkPayment",children:"Cek Pembayaran"})]}),a.jsx(h,{})]})]})}),a.jsx(d,{product:p}),a.jsx(x,{}),a.jsx(c,{})]});var P};export{b as default};
//# sourceMappingURL=Detail-Bdl6UvLH.js.map
